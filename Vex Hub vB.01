-- Vex Hub 
-- By Vex Dev & Creator
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- ======= ScreenGui =======
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "VexHubGUI"
screenGui.Parent = player:WaitForChild("PlayerGui")

-- ======= Toggle Button =======
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0,100,0,30)
toggleButton.Position = UDim2.new(0,20,0,100)
toggleButton.Text = "Vex Hub"
toggleButton.BackgroundColor3 = Color3.fromRGB(152,3,252)
toggleButton.TextColor3 = Color3.new(1,1,1)
toggleButton.Parent = screenGui
toggleButton.Active = true
toggleButton.Draggable = true

-- ======= Main Panel =======
local panel = Instance.new("Frame")
panel.Size = UDim2.new(0,600,0,300)
panel.Position = UDim2.new(0.5,-300,0.5,-150)
panel.BackgroundColor3 = Color3.fromRGB(152,3,252)
panel.BackgroundTransparency = 0.5
panel.Parent = screenGui

toggleButton.MouseButton1Click:Connect(function()
    panel.Visible = not panel.Visible
end)

-- ======= Header =======
local header = Instance.new("Frame")
header.Size = UDim2.new(1,0,0,40)
header.Position = UDim2.new(0,0,0,0)
header.BackgroundColor3 = Color3.fromRGB(120,0,220)
header.Parent = panel

local headerText = Instance.new("TextLabel")
headerText.Size = UDim2.new(1,-60,0,20)
headerText.Position = UDim2.new(0,10,0,5)
headerText.Text = "Welcome "..player.DisplayName.." to Vex Hub!"
headerText.TextColor3 = Color3.new(1,1,1)
headerText.BackgroundTransparency = 1
headerText.TextScaled = true
headerText.TextXAlignment = Enum.TextXAlignment.Left
headerText.Parent = header

local headerCredits = Instance.new("TextLabel")
headerCredits.Size = UDim2.new(0,50,0,15)
headerCredits.Position = UDim2.new(1,-55,0,20)
headerCredits.Text = "By Vex"
headerCredits.TextColor3 = Color3.new(1,1,1)
headerCredits.BackgroundTransparency = 1
headerCredits.TextScaled = true
headerCredits.Parent = header

-- ======= Tab Header =======
local tabHeader = Instance.new("TextLabel")
tabHeader.Size = UDim2.new(1,0,0,20)
tabHeader.Position = UDim2.new(0,0,0,40)
tabHeader.Text = "Active Tab: Movement"
tabHeader.TextColor3 = Color3.new(1,1,1)
tabHeader.BackgroundColor3 = Color3.fromRGB(100,0,200)
tabHeader.TextScaled = true
tabHeader.Parent = panel

-- ======= Left Column =======
local leftPanel = Instance.new("Frame")
leftPanel.Size = UDim2.new(0,150,1,-60)
leftPanel.Position = UDim2.new(0,0,0,60)
leftPanel.BackgroundColor3 = Color3.fromRGB(130,0,230)
leftPanel.BackgroundTransparency = 0.5
leftPanel.Parent = panel

-- Info bar
local infoBar = Instance.new("Frame")
infoBar.Size = UDim2.new(0,40,1,0)
infoBar.Position = UDim2.new(0,0,0,0)
infoBar.BackgroundColor3 = Color3.fromRGB(100,0,200)
infoBar.Parent = leftPanel

-- Player PFP at bottom
local pfpSize = 40
local pfpFrame = Instance.new("Frame")
pfpFrame.Size = UDim2.new(0,pfpSize,0,pfpSize)
pfpFrame.Position = UDim2.new(0,0,1,-pfpSize)
pfpFrame.BackgroundTransparency = 1
pfpFrame.Parent = infoBar

local pfpImage = Instance.new("ImageLabel")
pfpImage.Size = UDim2.new(1,0,1,0)
pfpImage.BackgroundTransparency = 1
pfpImage.Image = "rbxthumb://type=AvatarHeadShot&id="..player.UserId.."&w=420&h=420"
pfpImage.Parent = pfpFrame
pfpImage.ClipsDescendants = true
pfpImage.ScaleType = Enum.ScaleType.Crop
local uicorner = Instance.new("UICorner")
uicorner.CornerRadius = UDim.new(0.5,0)
uicorner.Parent = pfpImage

-- Tabs Column
local tabsColumn = Instance.new("Frame")
tabsColumn.Size = UDim2.new(1,-40,1,0)
tabsColumn.Position = UDim2.new(0,40,0,0)
tabsColumn.BackgroundTransparency = 1
tabsColumn.Parent = leftPanel

local function createTabButton(name,posY)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,0,0,40)
    btn.Position = UDim2.new(0,0,0,posY)
    btn.Text = name
    btn.BackgroundColor3 = Color3.fromRGB(100,0,200)
    btn.TextColor3 = Color3.new(1,1,1)
    btn.Parent = tabsColumn
    return btn
end

local movementTabBtn = createTabButton("Movement",0)
local playersTabBtn = createTabButton("Players",50)
local settingsTabBtn = createTabButton("Settings",100)

-- ======= Content Area =======
local contentArea = Instance.new("Frame")
contentArea.Size = UDim2.new(1,-150,1,-60)
contentArea.Position = UDim2.new(0,150,0,60)
contentArea.BackgroundColor3 = Color3.fromRGB(152,3,252)
contentArea.BackgroundTransparency = 0.5
contentArea.Parent = panel

local function createContentFrame()
    local f = Instance.new("Frame")
    f.Size = UDim2.new(1,0,1,0)
    f.BackgroundTransparency = 1
    f.Parent = contentArea
    f.Visible = false
    return f
end

local movementFrame = createContentFrame()
local playersFrame = createContentFrame()
local settingsFrame = createContentFrame()

-- ======= Tab Switching =======
local function highlightTab(active)
    for _,btn in pairs({movementTabBtn,playersTabBtn,settingsTabBtn}) do
        if btn==active then
            btn.BackgroundColor3 = Color3.fromRGB(180,0,240)
        else
            btn.BackgroundColor3 = Color3.fromRGB(100,0,200)
        end
    end
end

local function switchTab(tabBtn,frame,name)
    movementFrame.Visible=false
    playersFrame.Visible=false
    settingsFrame.Visible=false
    frame.Visible=true
    highlightTab(tabBtn)
    tabHeader.Text="Active Tab: "..name
end

movementTabBtn.MouseButton1Click:Connect(function()
    switchTab(movementTabBtn,movementFrame,"Movement")
end)
playersTabBtn.MouseButton1Click:Connect(function()
    switchTab(playersTabBtn,playersFrame,"Players")
end)
settingsTabBtn.MouseButton1Click:Connect(function()
    switchTab(settingsTabBtn,settingsFrame,"Settings")
end)

switchTab(movementTabBtn,movementFrame,"Movement")

-- ================== Movement Tab ==================
local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
local defaultSpeed = 16
local defaultJump = 50
local currentSpeed = humanoid and humanoid.WalkSpeed or defaultSpeed
local currentJump = humanoid and humanoid.JumpPower or defaultJump
local infEnabled = false
local noclipEnabled = false

local function createStatControl(parent,name,posY,getValue,setValue,default)
    local label = Instance.new("TextLabel")
    label.Size=UDim2.new(0,50,0,20)
    label.Position=UDim2.new(0,10,0,posY)
    label.Text=name
    label.TextColor3=Color3.new(1,1,1)
    label.BackgroundColor3=Color3.fromRGB(120,0,220)
    label.Parent=parent

    local valueLabel=Instance.new("TextLabel")
    valueLabel.Size=UDim2.new(0,50,0,20)
    valueLabel.Position=UDim2.new(0,60,0,posY)
    valueLabel.Text=tostring(getValue())
    valueLabel.TextColor3=Color3.new(1,1,1)
    valueLabel.BackgroundTransparency=1
    valueLabel.Parent=parent

    local minusBtn = Instance.new("TextButton")
    minusBtn.Size=UDim2.new(0,20,0,20)
    minusBtn.Position=UDim2.new(0,120,0,posY)
    minusBtn.Text="-"
    minusBtn.BackgroundColor3=Color3.fromRGB(100,0,200)
    minusBtn.TextColor3=Color3.new(1,1,1)
    minusBtn.Parent=parent

    local plusBtn = Instance.new("TextButton")
    plusBtn.Size=UDim2.new(0,20,0,20)
    plusBtn.Position=UDim2.new(0,150,0,posY)
    plusBtn.Text="+"
    plusBtn.BackgroundColor3=Color3.fromRGB(100,0,200)
    plusBtn.TextColor3=Color3.new(1,1,1)
    plusBtn.Parent=parent

    local resetBtn = Instance.new("TextButton")
    resetBtn.Size=UDim2.new(0,40,0,20)
    resetBtn.Position=UDim2.new(0,180,0,posY)
    resetBtn.Text="Reset"
    resetBtn.BackgroundColor3=Color3.fromRGB(200,0,0)
    resetBtn.TextColor3=Color3.new(1,1,1)
    resetBtn.Parent=parent

    local holdingMinus=false
    local holdingPlus=false
    minusBtn.MouseButton1Down:Connect(function() holdingMinus=true end)
    minusBtn.MouseButton1Up:Connect(function() holdingMinus=false end)
    plusBtn.MouseButton1Down:Connect(function() holdingPlus=true end)
    plusBtn.MouseButton1Up:Connect(function() holdingPlus=false end)
    resetBtn.MouseButton1Click:Connect(function()
        setValue(default)
        valueLabel.Text=tostring(default)
    end)

    RunService.RenderStepped:Connect(function()
        if holdingMinus then
            setValue(getValue()-2)
            valueLabel.Text=tostring(getValue())
        elseif holdingPlus then
            setValue(getValue()+2)
            valueLabel.Text=tostring(getValue())
        end
    end)
end

createStatControl(movementFrame,"Speed",20,
    function() return currentSpeed end,
    function(v) currentSpeed=v humanoid.WalkSpeed=v end,
    defaultSpeed)

createStatControl(movementFrame,"Jump",60,
    function() return currentJump end,
    function(v) currentJump=v humanoid.JumpPower=v end,
    defaultJump)

-- InfJump toggle
local infBtn = Instance.new("TextButton")
infBtn.Size = UDim2.new(0,80,0,30)
infBtn.Position = UDim2.new(0,10,0,100)
infBtn.Text = "InfJump: Off"
infBtn.BackgroundColor3 = Color3.fromRGB(100,0,200)
infBtn.TextColor3 = Color3.new(1,1,1)
infBtn.Parent = movementFrame

local infEnabled=false
infBtn.MouseButton1Click:Connect(function()
    infEnabled = not infEnabled
    infBtn.Text = "InfJump: "..(infEnabled and "On" or "Off")
end)

UIS.InputBegan:Connect(function(input,gp)
    if infEnabled and input.UserInputType==Enum.UserInputType.Keyboard and input.KeyCode==Enum.KeyCode.Space then
        local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
        if hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
    end
end)

-- Noclip toggle
local noclipBtn = Instance.new("TextButton")
noclipBtn.Size = UDim2.new(0,80,0,30)
noclipBtn.Position = UDim2.new(0,100,0,100)
noclipBtn.Text = "Noclip: Off"
noclipBtn.BackgroundColor3 = Color3.fromRGB(100,0,200)
noclipBtn.TextColor3 = Color3.new(1,1,1)
noclipBtn.Parent = movementFrame

local noclipEnabled=false
noclipBtn.MouseButton1Click:Connect(function()
    noclipEnabled = not noclipEnabled
    noclipBtn.Text = "Noclip: "..(noclipEnabled and "On" or "Off")
end)

RunService.Stepped:Connect(function()
    if noclipEnabled then
        for _,part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide=false
            end
        end
    end
end)

-- ================== Players Tab ==================
local playerList = Instance.new("ScrollingFrame")
playerList.Size = UDim2.new(1,-20,1,-20)
playerList.Position = UDim2.new(0,10,0,10)
playerList.CanvasSize = UDim2.new(0,0,0,0)
playerList.ScrollBarThickness = 10
playerList.BackgroundTransparency = 1
playerList.Parent = playersFrame

local listLayout = Instance.new("UIListLayout")
listLayout.Padding = UDim.new(0,5)
listLayout.Parent = playerList

local highlights = {}

local function createPlayerEntry(plr)
    local entry = Instance.new("Frame")
    entry.Size = UDim2.new(1,0,0,120)
    entry.BackgroundColor3 = Color3.fromRGB(120,0,220)
    entry.Parent = playerList

    local pfp = Instance.new("ImageLabel")
    pfp.Size = UDim2.new(0,50,0,50)
    pfp.Position = UDim2.new(0,5,0,5)
    pfp.BackgroundTransparency = 1
    pfp.Image = "rbxthumb://type=AvatarHeadShot&id="..plr.UserId.."&w=420&h=420"
    pfp.Parent = entry
    local uicorner = Instance.new("UICorner")
    uicorner.CornerRadius = UDim.new(0.5,0)
    uicorner.Parent = pfp

    local displayLabel = Instance.new("TextLabel")
    displayLabel.Size = UDim2.new(0,120,0,20)
    displayLabel.Position = UDim2.new(0,60,0,5)
    displayLabel.Text = plr.DisplayName
    displayLabel.TextColor3 = Color3.new(1,1,1)
    displayLabel.BackgroundTransparency = 1
    displayLabel.TextXAlignment = Enum.TextXAlignment.Left
    displayLabel.Parent = entry

    local usernameLabel = Instance.new("TextLabel")
    usernameLabel.Size = UDim2.new(0,120,0,15)
    usernameLabel.Position = UDim2.new(0,60,0,25)
    usernameLabel.Text = plr.Name
    usernameLabel.TextColor3 = Color3.fromRGB(200,200,200)
    usernameLabel.TextSize = 12
    usernameLabel.BackgroundTransparency = 1
    usernameLabel.TextXAlignment = Enum.TextXAlignment.Left
    usernameLabel.Parent = entry

    -- Teleport button
    local tpBtn = Instance.new("TextButton")
    tpBtn.Size = UDim2.new(0,70,0,20)
    tpBtn.Position = UDim2.new(0,60,0,45)
    tpBtn.Text = "Teleport"
    tpBtn.BackgroundColor3 = Color3.fromRGB(100,0,200)
    tpBtn.TextColor3 = Color3.new(1,1,1)
    tpBtn.Parent = entry
    tpBtn.MouseButton1Click:Connect(function()
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") 
           and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            player.Character.HumanoidRootPart.CFrame = plr.Character.HumanoidRootPart.CFrame + Vector3.new(0,5,0)
        end
    end)

    -- ESP toggle
    local espBtn = Instance.new("TextButton")
    espBtn.Size = UDim2.new(0,40,0,20)
    espBtn.Position = UDim2.new(0,140,0,45)
    espBtn.Text = "ESP"
    espBtn.BackgroundColor3 = Color3.fromRGB(100,0,200)
    espBtn.TextColor3 = Color3.new(1,1,1)
    espBtn.Parent = entry

    local espHighlight = nil
    local espEnabled = false
    espBtn.MouseButton1Click:Connect(function()
        espEnabled = not espEnabled
        if espEnabled then
            if plr.Character then
                espHighlight = Instance.new("Highlight")
                espHighlight.Adornee = plr.Character
                espHighlight.FillColor = Color3.fromRGB(255,255,0)
                espHighlight.OutlineColor = Color3.new(1,1,1)
                espHighlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                espHighlight.Parent = workspace
            end
            espBtn.Text = "✔"
        else
            if espHighlight then
                espHighlight:Destroy()
                espHighlight = nil
            end
            espBtn.Text = "ESP"
        end
    end)

    -- Highlight color buttons
    local colors = {
        {Name="Red", Color=Color3.fromRGB(255,0,0)},
        {Name="Green", Color=Color3.fromRGB(0,255,0)},
        {Name="Blue", Color=Color3.fromRGB(0,0,255)}
    }
    local indicatorLabels = {}

    for i,c in ipairs(colors) do
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(0,40,0,20)
        btn.Position = UDim2.new(0,60+(i-1)*50,0,70)
        btn.Text = c.Name
        btn.BackgroundColor3 = c.Color
        btn.TextColor3 = Color3.new(1,1,1)
        btn.Parent = entry

        local indicator = Instance.new("TextLabel")
        indicator.Size = UDim2.new(0,40,0,15)
        indicator.Position = UDim2.new(0,60+(i-1)*50,0,95)
        indicator.Text = "x"
        indicator.TextColor3 = Color3.new(1,1,1)
        indicator.BackgroundTransparency = 1
        indicator.Parent = entry
        indicatorLabels[i] = indicator

        btn.MouseButton1Click:Connect(function()
            if highlights[plr] then highlights[plr]:Destroy() end
            local h = Instance.new("Highlight")
            h.Adornee = plr.Character
            h.FillColor = c.Color
            h.OutlineColor = Color3.new(1,1,1)
            h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            h.Parent = workspace
            highlights[plr] = h

            for j,ind in ipairs(indicatorLabels) do
                ind.Text = (j==i) and "✔" or "x"
            end
        end)
    end

    -- Live HP bar
    local healthBar = Instance.new("Frame")
    healthBar.Size = UDim2.new(0,50,0,5)
    healthBar.Position = UDim2.new(0,5,0,60)
    healthBar.BackgroundColor3 = Color3.fromRGB(255,0,0)
    healthBar.Parent = entry

    RunService.RenderStepped:Connect(function()
        if plr.Character and plr.Character:FindFirstChildOfClass("Humanoid") then
            local hum = plr.Character:FindFirstChildOfClass("Humanoid")
            healthBar.Size = UDim2.new(math.clamp(hum.Health/hum.MaxHealth,0,1),0,0,5)
        end
    end)
end

-- Update player list
local function updatePlayerList()
    for _,child in pairs(playerList:GetChildren()) do
        if child:IsA("Frame") then child:Destroy() end
    end
    for _,plr in pairs(Players:GetPlayers()) do
        if plr ~= player then
            createPlayerEntry(plr)
        end
    end
    playerList.CanvasSize = UDim2.new(0,0,0,listLayout.AbsoluteContentSize + 10)
end

Players.PlayerAdded:Connect(updatePlayerList)
Players.PlayerRemoving:Connect(updatePlayerList)
updatePlayerList()

-- ================== Settings Tab ==================
local settingsList = Instance.new("Frame")
settingsList.Size = UDim2.new(1,0,1,0)
settingsList.BackgroundTransparency = 1
settingsList.Parent = settingsFrame

local transLabel = Instance.new("TextLabel")
transLabel.Size = UDim2.new(0,80,0,20)
transLabel.Position = UDim2.new(0,10,0,10)
transLabel.Text = "Transparency"
transLabel.TextColor3 = Color3.new(1,1,1)
transLabel.BackgroundTransparency = 1
transLabel.Parent = settingsList

local transValue = 0.5
local transDisplay = Instance.new("TextLabel")
transDisplay.Size = UDim2.new(0,50,0,20)
transDisplay.Position = UDim2.new(0,100,0,10)
transDisplay.Text = tostring(transValue*100).."%"
transDisplay.TextColor3 = Color3.new(1,1,1)
transDisplay.BackgroundTransparency = 1
transDisplay.Parent = settingsList

local minusBtn = Instance.new("TextButton")
minusBtn.Size = UDim2.new(0,20,0,20)
minusBtn.Position = UDim2.new(0,160,0,10)
minusBtn.Text="-"
minusBtn.BackgroundColor3 = Color3.fromRGB(100,0,200)
minusBtn.TextColor3 = Color3.new(1,1,1)
minusBtn.Parent = settingsList

local plusBtn = Instance.new("TextButton")
plusBtn.Size = UDim2.new(0,20,0,20)
plusBtn.Position = UDim2.new(0,190,0,10)
plusBtn.Text="+"
plusBtn.BackgroundColor3 = Color3.fromRGB(100,0,200)
plusBtn.TextColor3 = Color3.new(1,1,1)
plusBtn.Parent = settingsList

local holdingMinus=false
local holdingPlus=false
minusBtn.MouseButton1Down:Connect(function() holdingMinus=true end)
minusBtn.MouseButton1Up:Connect(function() holdingMinus=false end)
plusBtn.MouseButton1Down:Connect(function() holdingPlus=true end)
plusBtn.MouseButton1Up:Connect(function() holdingPlus=false end)

RunService.RenderStepped:Connect(function()
    if holdingMinus then
        transValue = math.clamp(transValue-0.01,0,1)
        panel.BackgroundTransparency = transValue
        transDisplay.Text = tostring(math.floor(transValue*100)).."%"
    elseif holdingPlus then
        transValue = math.clamp(transValue+0.01,0,1)
        panel.BackgroundTransparency = transValue
        transDisplay.Text = tostring(math.floor(transValue*100)).."%"
    end
end)

local unloadBtn = Instance.new("TextButton")
unloadBtn.Size = UDim2.new(0,100,0,30)
unloadBtn.Position = UDim2.new(0,10,0,50)
unloadBtn.Text = "Unload Panel"
unloadBtn.TextColor3 = Color3.fromRGB(255,0,0)
unloadBtn.BackgroundColor3 = Color3.fromRGB(50,0,0)
unloadBtn.Parent = settingsList
unloadBtn.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)
